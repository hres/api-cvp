<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]--><!--[if gt IE 8]><!-->
<html class="no-js" lang="fr" dir="ltr">
<!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
        wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Recherche dans la base de données en ligne des effets indésirables de Canada Vigilance</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <!-- Meta data -->
    <meta name="dcterms.language" title="ISO639-2" content="fra" />
    <meta name="dcterms.title" content="Drug and health product inspections" />
    <meta name="description" content="Find the latest results from the Government's drug and health product inspections." />
    <meta name="dcterms.subject" title="scheme" content="" />
    <meta name="dcterms.creator" content="Government of Canada, Health Canada and the Public health Agency of Canada" />
    <meta name="dcterms.contributor" content="" />
    <meta name="dcterms.type" title="gctype" content="" />
    <meta name="dcterms.audience" title="gcaudience" content="" />
    <meta name="dcterms.issued" title="W3CDTF" content="2015-04-21" />
    <meta name="dcterms.modified" title="W3CDTF" content="2016-03-18" />
    <meta name="review_date" content="" />
    <meta name="meta_date" content="" />

    <!-- Load closure template scripts -->
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_22/cdts/compiled/soyutils.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_22/cdts/compiled/wet-fr.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_22/cdts/compiled/plugins-fr.js"></script>
    <!--<script type="text/javascript" src="./gcweb_4.0.22/wet-fr.js"></script>
    <script type="text/javascript" src="./gcweb_4.0.22/plugins-fr.js"></script>-->
    <!-- Load closure template scripts -->
    <noscript>
        <link rel="import" href="./StaticFallbackFiles/gcweb/refTop.html">
    </noscript>
    <!-- Write closure template -->
    <script type="text/javascript">
            document.write(wet.builder.refTop({
                cdnEnv: "prod"
            }));
    </script>

    <!-- Google Tag Manager DO NOT REMOVE OR MODIFY - NE PAS SUPPRIMER OU MODIFIER -->
    <script>dataLayer1 = [];</script>
    <!-- End Google Tag Manager -->
    <script src="./js/cvp.js"></script>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
    <!-- Google Tag Manager DO NOT REMOVE OR MODIFY - NE PAS SUPPRIMER OU MODIFIER -->
    <noscript>
        <iframe title="Google Tag Manager" src="//www.googletagmanager.com/ns.html?id=GTM-TLGQ9K" height="0" width="0"
                style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement

(s),dl=l!='dataLayer1'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})

(window,document,'script','dataLayer1','GTM-TLGQ9K');
    </script>
    <!-- End Google Tag Manager -->
    <div id="def-top">
        <!-- top-en.html-Start-->
        <link rel="import" href="./StaticFallbackFiles/gcweb/top-fr.html">
        <!-- top-en.html-End-->
    </div>
    <!-- Write closure template -->
    <script type="text/javascript">
	var defTop = document.getElementById("def-top");
	var jsonbread = [{ title: "Accueil", href: "http://www.canada.ca/fr/index.html" },
        { title: "Médicaments et produits de santé", href: "http://www.hc-sc.gc.ca/dhp-mps/index-fra.php" },
        { title: "MedEffect Canada", href: "http://www.hc-sc.gc.ca/dhp-mps/medeff/index-fra.php" },
        { title: "Recherche dans la base de données en ligne des effets indésirables de Canada Vigilance" }];

	//console.log(jsonbread);
	defTop.outerHTML = wet.builder.top({
	    cdnEnv: "prod",
	    search: true,
		lngLinks: [{
			lang: "fr",
			href: "canada-vigilance-result.html",
			text: "English",
		}],
		showPreContent: true,
		breadcrumbs:jsonbread,
	});
    </script>

    <div class="container">
        <main role="main" property="mainContentOfPage" class="container">
            <h1 property="name" id="wb-cont">Base de données en ligne des effets indésirables de Canada Vigilance</h1>

            <section class="panel panel-default">
                <header class="panel-heading">
                    <h2 class="panel-title" id="title">
                        Résultats de recherche (Version de MedDRA : v.19.0)
                        <a class="btn btn-default btn-xs mrgn-rght-md pull-right" href="canada-vigilance-fr.html" role="button">Nouvelle recherche</a>
                    </h2>
                </header>

                <div class="panel-body">
                    <div class="text-info"><strong>Brand/Drug Name and Active Ingredient search results for (FR):</strong> <span id="searchTerm"></span></div>
                    <details open>
                        <summary><h4 class="h4">Options</h4></summary>
                        <div class="row bg-info">
                            <div class="col-md-2 col-sm-2" id="age-filter-section">
                                <label for="ageRange">Groupe d'âge</label>
                                <select class="form-control" name="ageRange" id="ageRange">
                                    <option value="">Tous les</option>
                                    <option value="0-20">0-20</option>
                                    <option value="21-40">21-40</option>
                                    <option value="41-60">41-60</option>
                                    <option value="61-80">61-80</option>
                                    <option value="80">80+</option>
                                </select>
                            </div>
                            <div class="col-md-2 col-sm-2" id="gender-filter-section">
                                <label for="gender">Sexe</label>
                                <select class="form-control" name="gender" id="gender">
                                    <option value="">Tous les</option>
                                    <option value="2">Femme</option>
                                    <option value="1">Homme</option>
                                    <option value="4">Non spécifié</option>
                                    <option value="3">Inconnu</option>
                                </select>
                            </div>
                            <div class="col-md-2 col-sm-2" id="seriousReport-filter-section">
                                <label for="seriousReport">Déclaration grave?</label>
                                <select class="form-control" name="seriousReport" id="seriousReport">
                                    <option value="">Les deux</option>
                                    <option value="01">Oui</option>
                                    <option value="02">Non</option>
                                </select>
                            </div>
                            <div class="col-md-2 col-sm-2" id="sourceOfReport-filter-section">
                                <label for="sourceOfReport">Source de la déclaration</label>
                                <select class="form-control" name="sourceOfReport" id="sourceOfReport">
                                    <option value="">Tous les</option>
                                    <option value="08">Autre</option>
                                    <option value="01">Communauté</option>
                                    <option value="07">Fabricant</option>
                                    <option value="03">Hôpital</option>
                                </select>
                            </div>
                            <div class="col-md-2 col-sm-2" id="reportOutcome-filter-section">
                                <label for="reportOutcome">Résultat de la déclaration</label>
                                <select class="form-control" name="reportOutcome" id="reportOutcome">
                                    <option value="">Tous les</option>
                                    <option value="11">Décès</option>
                                    <option value="02">En rétablissement/en résolution</option>
                                    <option value="06">Inconnu</option>
                                    <option value="09">Non rétabli/non résolu</option>
                                    <option value="07">Rétabli/résolu</option>
                                    <option value="10">Rétabli/résolu avec séquelles</option>
                                </select>
                            </div>
                            <div class="col-md-2 col-sm-2 form-group" id="date-filter-section">
                                <span class="field-name">Date de réception initiale</span><br/>
                                <label for="startDate" control-label"><span class="field-name">De</span><span class="datepicker-format"> (<abbr title="Les quatres chiffres de l'année, tiret, les deux chiffres du mois, tiret, les deux chiffres du jour">aaaa-mm-jj</abbr>)</span> :</label>
                                <input class="form-control" type="date" id="startDate" name="startDate" min="1965-01-01" data-rule-dateiso="true" />

                                <label for="endDate" control-label"><span class="field-name">à</span><span class="datepicker-format"> (<abbr title="Les quatres chiffres de l'année, tiret, les deux chiffres du mois, tiret, les deux chiffres du jour">aaaa-mm-jj</abbr>)</span> :</label>
                                <input class="form-control" type="date" id="endDate" name="endDate" min="1965-01-01" data-rule-dateISO="true" />
                            </div>
                        </div>
                    </details>
                        <p id="subParam1">Liste des déclarations d'effets indésirables</p>
                        <!--<div class="pull-right" id="btnDownload">
            <ul class="list-unstyled">
                <li class="btn-group btn-group-xs">
                    <input type="button" name="btnExcel" value="Télécharger csv" id="btnExcel" class="btn btn-default btn-xs mrgn-rght-md" />
                    <input type="button" name="btnJson" value="Télécharger json" id="btnJson" class="btn btn-default btn-xs mrgn-rght-md" />
                    <input type="button" name="btnXml" value="Télécharger xml" id="btnXml" class="btn btn-default btn-xs" />
                </li>
            </ul>
        </div>-->
                        <table id="cvpTable" class="wb-tables table table-striped table-hover table-bordered">
                            <thead>
                                <tr class="active">
                                    <th>Numéro d'identification de déclaration d'effet indésirable</th>
                                    <th>Numéro de la DEI du détenteur d'autorisation de mise en marché</th>
                                    <th>Date de réception initiale</th>
                                    <th>Âge</th>
                                    <th>Sexe</th>
                                    <th>Nom commercialisé du produit soupçonné</th>
                                    <th>Termes d'effet indésirable</th>
                            </thead>
                            <tbody id="tbodyMain"></tbody>
                        </table>
                        <div class="panel-footer text-center">
                            <div class="form-group mrgn-bttm-0">
                                <a class="btn btn-default" href="canada-vigilance-fr.html" role="button">Nouvelle recherche</a>
                            </div>
                        </div>
</div>
            </section>
            <!-- prefooter-en.html-Start-->
            <div id="def-preFooter">
                <link rel="import" href="./StaticFallbackFiles/gcweb/prefooter-fr.html">
            </div>
            <!-- prefooter-en.html-End-->
            <!-- Write closure template -->
            <script type="text/javascript">
                var defPreFooter = document.getElementById("def-preFooter");
                defPreFooter.outerHTML = wet.builder.preFooter({
                    cdnEnv: "prod",
                    dateModified: "2016-11-01",
                    showPostContent: true,
                    showShare: true,
                });
            </script>
        </main>
    </div>

    <!-- footer-en.html-Start-->
    <div id="def-footer">
        <link rel="import" href="./StaticFallbackFiles/gcweb/footer-fr.html">
    </div>
    <!-- footer-en.html-End-->
    <!-- Write closure template -->
    <script type="text/javascript">
            var defFooter = document.getElementById("def-footer");
            defFooter.outerHTML = wet.builder.footer({
                cdnEnv: "prod",
                showFeatures: true,
            });
    </script>
    <!-- Write closure template -->
    <script type="text/javascript">
                document.write(wet.builder.refFooter({
                    cdnEnv: "prod"
                }));
    </script>

    <script src="./js/dhpr.js"></script>
    <!--[if lt IE 10 | !IE ]><!-->
    <script src="./js/jquery.xdomainrequest.min.js"></script>
    <!--<![endif]-->

    <script>
        var lang = " fr";
        var pType = "cvp";
        var searchTerm = getParameterByName("term");
        $('#searchTerm').append("'" + searchTerm + "'");
        $('#btnDownload').hide();
        $("a#langLink").attr('href', goDhprLangUrl(lang, pType));

        //setting filter dropdowns to current value
        $("#gender").val(getParameterByName("gender"));
        $("#seriousReport").val(getParameterByName("seriousReport"));
        $("#sourceOfReport").val(getParameterByName("sourceOfReport"));
        $("#reportOutcome").val(getParameterByName("reportOutcome"));
        $("#ageRange").val(getParameterByName("ageRange"));
        $("#startDate").val(getParameterByName("startDate"));
        $("#endDate").val(getParameterByName("endDate"));


        $('#ageRange').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("ageRange"));
            var sendUrl = currentUrl.replace("&ageRange=" + currentVal, "&ageRange=" + $('#ageRange').val());
            window.location.href = sendUrl;
        });

        $('#gender').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("gender"));
            var sendUrl = currentUrl.replace("&gender=" + currentVal, "&gender=" + $('#gender').val());
            window.location.href = sendUrl;
        });

        $('#seriousReport').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("seriousReport"));
            var sendUrl = currentUrl.replace("&seriousReport=" + currentVal, "&seriousReport=" + $('#seriousReport').val());
            window.location.href = sendUrl;
        });

        $('#sourceOfReport').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("sourceOfReport"));
            var sendUrl = currentUrl.replace("&sourceOfReport=" + currentVal, "&sourceOfReport=" + $('#sourceOfReport').val());
            window.location.href = sendUrl;
        });

        $('#reportOutcome').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("reportOutcome"));
            var sendUrl = currentUrl.replace("&reportOutcome=" + currentVal, "&reportOutcome=" + $('#reportOutcome').val());
            window.location.href = sendUrl;
        });

        $('#startDate').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("startDate"));
            var sendUrl = currentUrl.replace("&startDate=" + currentVal, "&startDate=" + $('#startDate').val());
            window.location.href = sendUrl;
        });

        $('#endDate').change(function () {
            var currentUrl = window.location.href;
            var currentVal = $.trim(getParameterByName("endDate"));
            var sendUrl = currentUrl.replace("&endDate=" + currentVal, "&endDate=" + $('#endDate').val());
            window.location.href = sendUrl;
        });


            window["wb-tables"] = {
                "processing": true,
                "ajax": {
                    "url": goCvpUrl(lang),
                    //"success": function (data) {
                    //    alert('i got success');
                    //},
                    "error": OnFail
                },
                "order": [[0, "desc"]],
                "columns": [
                                {
                                    "data": null,
                                    "render": function (data, type, full) {
                                        return '<a href=canada-vigilance-detail-fr.html?lang=fr&linkID=' + data.report_id + '>' + data.report_no + '</a>';
                                    }
                                },
                                { "data": "mah_no" },
                                {
                                    "data": "date_int_received",
                                    "render": function (data, type, full, meta) {
                                        return formatedDate(data);
                                    }
                                },
                                {

                                    "data": null,
                                    "render": function (data, type, full) {
                                        return data.age_y + ' ' + data.age_unit;
                                    }
                                },
                                { "data": "gender_name" },
                                { "data": "drug_name" },
                                { "data": "pt_name" }
                ]
            }

            $(".wb-tables").on("xhr.dt", function (e, settings, json, xhr) {
                var count = Object.keys(json.data).length;
                if (count > 0)
                {
                    $('#btnDownload').show();
                }
                else
                {
                    $('#btnDownload').hide();
                }

                $('#btnExcel').click(function () {
                    ExportExcel(json, "RDSResult", true);
                });

                //Export json // "href": "data:application/json," + encodeURIComponent(JSON.stringify($(this).data().obj))
                $('#btnJson').click(function () {
                    var arrData = typeof json != 'object' ? JSON.parse(json) : json;
                    $("<a />", {
                        "download": "RDSResult.json",
                        "href": "data:application/json," + encodeURIComponent(JSON.stringify(json))
                    }).appendTo("body")
                  .click(function () {
                      $(this).remove()
                  })[0].click()
                });

                //Export xml
                $('#btnXml').click(function () {
                    var arrData = typeof json != 'object' ? JSON.parse(json.data) : json.data;
                    var xml = json2xml(arrData, 'items');
                    xml = '<?xml version="1.0" encoding="utf-8"?>' + xml;
                    var data = "Application/octet-stream," + encodeURIComponent(xml);
                    $("<a />", {
                        "download": "RDSResult.xml",
                        "href": "data:application/octet-stream," + encodeURIComponent(xml)
                    }).appendTo("body")
                  .click(function () {
                      $(this).remove()
                  })[0].click()
                });
            });
    </script>
</body>
</html>